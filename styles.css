:root{
  --bg:#0b1020; --panel:#0f1730; --panel2:#121a38; --ink:#e8eefc; --muted:#aab5d4;
  --accent:#3aa0ff; --accent2:#7cc86a; --chip:#1d2a52; --border:#2a345a;
}

*{box-sizing:border-box;}
html,body{height:100%;}
body{
  margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  color:var(--ink); background:linear-gradient(180deg,#091026,#0b1226 40%, #0a132a);
}

/* top */
.topbar{
  display:flex; align-items:center; justify-content:space-between;
  gap:1rem; padding:.75rem 1rem; border-bottom:1px solid var(--border);
  background:var(--panel);
}
.brand{font-weight:700;}
.controls{display:flex; align-items:center; gap:.75rem; flex-wrap:wrap;}
.control{display:flex; align-items:center; gap:.3rem; color:var(--muted);}
select,.search{
  background:var(--panel2); color:var(--ink); border:1px solid var(--border);
  padding:.45rem .6rem; border-radius:.5rem; outline:none;
}
.search{min-width:18ch;}
.btn{
  background:#1a2347; color:var(--ink); padding:.55rem .9rem; border:none; border-radius:.6rem; cursor:pointer; border:1px solid var(--border);
}
.btn.small{padding:.4rem .7rem; font-size:.9rem;}
.btn:hover{background:#1b2a54;}
.btn.accent{background:var(--accent); color:#071227; border-color:transparent;}
.btn.accent:hover{filter:brightness(1.05);}

/* ayah header strip */
.ayah-strip{
  display:grid; grid-template-columns: 1fr 1fr; gap:.75rem;
  padding:.8rem 1rem; border-bottom:1px solid var(--border); background:#0c1430;
}
.ayah-ar{font-size:1.25rem; text-align:center; direction:rtl; line-height:1.9;}
.ayah-bn{font-size:1.02rem; color:var(--muted);}

/* card shell */
.card-wrap{display:grid; place-items:center; padding:1rem;}
.card{position:relative; width:min(1200px,96vw); height:64vh; perspective:1000px;}
.face{
  position:absolute; inset:0; padding:1rem; border:1px solid var(--border);
  border-radius:14px; background:radial-gradient(1200px 450px at 70% -50%, #172250, #0f1836 60%, #0b1226);
  display:grid; grid-template-columns:1.1fr .9fr; gap:1rem; backface-visibility:hidden; transition:transform .5s ease-in-out;
}

/* FRONT */
.front .left{display:flex; flex-direction:column; gap:1rem;}
.chip{background:var(--chip); color:var(--ink); padding:.25rem .5rem; border-radius:6px; font-size:.9rem; width:max-content;}
.word-ar{font-size:2.9rem; direction:rtl; text-align:right; line-height:1.3; margin-left:auto;} /* push right */
.word-bn{font-size:1.15rem; color:var(--muted);}
.grid{display:grid; gap:.45rem; grid-template-columns:1fr;}
.label{color:#9bb2ff;}
.left .grid div{font-size:1.08rem;} /* bigger root/method text */

/* RIGHT derivations */
.right{border-left:1px dashed var(--border); padding-left:1rem;}
.deriv-header{font-weight:800; margin-bottom:.5rem; color:#a4d1ff;}
.deriv-list{display:flex; flex-direction:column; gap:.7rem; max-height:48vh; overflow:auto; padding-right:.5rem;}
.deriv-item{padding:.75rem .85rem; background:#0e1a3c; border:1px solid var(--border); border-radius:12px;}
.deriv-item .arabic{direction:rtl; text-align:right; font-size:1.55rem; line-height:1.4; margin-bottom:.2rem;}
.deriv-item .meaning{color:var(--accent2); font-weight:700; margin:.28rem 0 .45rem;}
.deriv-item .ex{color:#cfd7f7; margin:.25rem 0;}
.rtl{direction:rtl; text-align:right;}
.ar-lg{font-size:1.55rem;}
.occ-wrap{ margin-top:.35rem; display:flex; flex-wrap:wrap; }
.chip-sm{
  display:inline-block; margin:.20rem .3rem 0 0; padding:.22rem .5rem;
  border:1px solid var(--border); border-radius:.5rem; background:#0f2147; color:#cfe0ff; font-size:.9rem; cursor:pointer; user-select:none;
}
.chip-sm.copied{ background:#1e7a46; color:#ebfff3; border-color:transparent; }

/* BACK */
.back{transform:rotateY(180deg); grid-template-columns:1fr;}
.card.flipped .front{transform:rotateY(180deg);}
.card.flipped .back{transform:rotateY(360deg);}

.back-top{display:flex; gap:.6rem; align-items:center;}
.surah-pill,.back-word-pill{
  background:#0c1a3d; padding:.35rem .6rem; border:1px solid var(--border); border-radius:8px; color:#cfe0ff;
}
.back-center{display:grid; place-items:center; gap:.35rem; height:28%;}
.back-big{direction:rtl; text-align:center; font-size:3.1rem; line-height:1.25;}
.back-bn{color:var(--muted); font-size:1.12rem;}
.back-deriv{display:grid; place-items:center; height:60%;}
.deriv-bubble{
  width:min(980px,94%); padding:1rem; background:#0d1838; border:1px solid var(--border); border-radius:18px;
  display:flex; flex-direction:column; gap:1rem; max-height:100%; overflow:auto;
}

/* Ayah grid ONLY (back) */
.ayah-grid-shell{padding:.2rem;}
.ayah-grid{
  display:grid; grid-template-columns: 1fr 1fr; gap:.9rem; /* two columns of pairs */
}
.pair{
  display:grid; grid-template-columns: 1fr 1fr; gap:.6rem;
  background:#0e1a3c; border:1px solid var(--border); border-radius:12px; padding:.55rem .7rem;
}
.pair-ar{font-size:1.55rem; direction:rtl; text-align:right; line-height:1.35;}
.pair-bn{font-size:1.08rem; color:#d8e1ff;}

/* nav + errors */
.nav{display:flex; gap:.6rem; align-items:center; justify-content:center; padding:.8rem; border-top:1px solid var(--border); background:var(--panel);}
.pos{margin-left:1rem; color:var(--muted);}
.error{position:fixed; left:0; right:0; bottom:0; background:#c0392b; color:#fff; padding:.6rem .9rem; text-align:center;}
.hidden{display:none;}
